# pyinstaller


* 先前會用 py2exe 把 python 程式變成 Windows 執行檔，可以把一些不想揭露原始碼的小工具變成方便散播的格式。
* 查了一下在 macOS 或 Linux 上可以改用 pyinstaller
    * 參考 https://stackoverflow.com/a/9035527
* 官網：https://pyinstaller.org/en/stable/
* Github: https://github.com/pyinstaller/pyinstaller

( 2024-05-31 16:39:52 )
* 安裝：`pip3 install pyinstaller`
* 以 hcml 新竹市圖書館的 requests 為例：
```
jazzwang:~/git/snippet/python/requests/hcml$ pyinstaller check-books.py 
3293 INFO: PyInstaller: 6.7.0, contrib hooks: 2024.6
3293 INFO: Python: 3.9.6
3439 INFO: Platform: macOS-12.7.5-x86_64-i386-64bit
3442 INFO: wrote /Users/jazzwang/git/snippet/python/requests/hcml/check-books.spec
3487 INFO: Extending PYTHONPATH with paths
['/Users/jazzwang/git/snippet/python/requests/hcml']
7145 INFO: checking Analysis
7146 INFO: Building Analysis because Analysis-00.toc is non existent
7146 INFO: Running Analysis Analysis-00.toc
7147 INFO: Target bytecode optimization level: 0
7147 INFO: Initializing module dependency graph...
7158 INFO: Caching module graph hooks...
7249 INFO: Analyzing base_library.zip ...
8886 INFO: Loading module hook 'hook-encodings.py' from '/Users/jazzwang/Library/Python/3.9/lib/python/site-packages/PyInstaller/hooks'...
10890 INFO: Loading module hook 'hook-pickle.py' from '/Users/jazzwang/Library/Python/3.9/lib/python/site-packages/PyInstaller/hooks'...
12196 INFO: Loading module hook 'hook-heapq.py' from '/Users/jazzwang/Library/Python/3.9/lib/python/site-packages/PyInstaller/hooks'...
13728 INFO: Caching module dependency graph...
13861 INFO: Looking for Python shared library...
13936 INFO: Using Python shared library: /Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/Python3
13937 INFO: Analyzing /Users/jazzwang/git/snippet/python/requests/hcml/check-books.py
16115 INFO: Loading module hook 'hook-charset_normalizer.py' from '/Users/jazzwang/Library/Python/3.9/lib/python/site-packages/_pyinstaller_hooks_contrib/hooks/stdhooks'...
16428 INFO: Loading module hook 'hook-certifi.py' from '/Users/jazzwang/Library/Python/3.9/lib/python/site-packages/_pyinstaller_hooks_contrib/hooks/stdhooks'...
16681 INFO: Loading module hook 'hook-pandas.py' from '/Users/jazzwang/Library/Python/3.9/lib/python/site-packages/PyInstaller/hooks'...
25697 INFO: Loading module hook 'hook-platform.py' from '/Users/jazzwang/Library/Python/3.9/lib/python/site-packages/PyInstaller/hooks'...
25770 INFO: Loading module hook 'hook-xml.py' from '/Users/jazzwang/Library/Python/3.9/lib/python/site-packages/PyInstaller/hooks'...
25818 INFO: Loading module hook 'hook-sysconfig.py' from '/Users/jazzwang/Library/Python/3.9/lib/python/site-packages/PyInstaller/hooks'...
25851 INFO: Processing pre-safe import module hook distutils from '/Users/jazzwang/Library/Python/3.9/lib/python/site-packages/PyInstaller/hooks/pre_safe_import_module/hook-distutils.py'.
25856 INFO: Processing pre-find module path hook distutils from '/Users/jazzwang/Library/Python/3.9/lib/python/site-packages/PyInstaller/hooks/pre_find_module_path/hook-distutils.py'.
25869 INFO: Loading module hook 'hook-distutils.py' from '/Users/jazzwang/Library/Python/3.9/lib/python/site-packages/PyInstaller/hooks'...
25997 INFO: Loading module hook 'hook-numpy.py' from '/Users/jazzwang/Library/Python/3.9/lib/python/site-packages/numpy/_pyinstaller'...
27485 INFO: Loading module hook 'hook-difflib.py' from '/Users/jazzwang/Library/Python/3.9/lib/python/site-packages/PyInstaller/hooks'...
27863 INFO: Loading module hook 'hook-multiprocessing.util.py' from '/Users/jazzwang/Library/Python/3.9/lib/python/site-packages/PyInstaller/hooks'...
32003 INFO: Loading module hook 'hook-pytz.py' from '/Users/jazzwang/Library/Python/3.9/lib/python/site-packages/PyInstaller/hooks'...
32341 INFO: Loading module hook 'hook-pkg_resources.py' from '/Users/jazzwang/Library/Python/3.9/lib/python/site-packages/PyInstaller/hooks'...
37073 INFO: Loading module hook 'hook-pandas.io.formats.style.py' from '/Users/jazzwang/Library/Python/3.9/lib/python/site-packages/PyInstaller/hooks'...
40718 INFO: Loading module hook 'hook-pandas.plotting.py' from '/Users/jazzwang/Library/Python/3.9/lib/python/site-packages/PyInstaller/hooks'...
42948 INFO: Loading module hook 'hook-sqlite3.py' from '/Users/jazzwang/Library/Python/3.9/lib/python/site-packages/PyInstaller/hooks'...
43555 INFO: Loading module hook 'hook-pandas.io.clipboard.py' from '/Users/jazzwang/Library/Python/3.9/lib/python/site-packages/PyInstaller/hooks'...
44672 INFO: Processing pre-safe import module hook six.moves from '/Users/jazzwang/Library/Python/3.9/lib/python/site-packages/PyInstaller/hooks/pre_safe_import_module/hook-six.moves.py'.
45314 INFO: Loading module hook 'hook-xml.etree.cElementTree.py' from '/Users/jazzwang/Library/Python/3.9/lib/python/site-packages/PyInstaller/hooks'...
45327 INFO: Loading module hook 'hook-lxml.py' from '/Users/jazzwang/Library/Python/3.9/lib/python/site-packages/_pyinstaller_hooks_contrib/hooks/stdhooks'...
46269 INFO: Loading module hook 'hook-lxml.etree.py' from '/Users/jazzwang/Library/Python/3.9/lib/python/site-packages/_pyinstaller_hooks_contrib/hooks/stdhooks'...
46302 INFO: Loading module hook 'hook-xml.dom.domreg.py' from '/Users/jazzwang/Library/Python/3.9/lib/python/site-packages/PyInstaller/hooks'...
48310 INFO: Processing module hooks...
48568 INFO: Loading module hook 'hook-lxml.isoschematron.py' from '/Users/jazzwang/Library/Python/3.9/lib/python/site-packages/_pyinstaller_hooks_contrib/hooks/stdhooks'...
48643 INFO: Processing pre-safe import module hook win32com from '/Users/jazzwang/Library/Python/3.9/lib/python/site-packages/_pyinstaller_hooks_contrib/hooks/pre_safe_import_module/hook-win32com.py'.
48847 INFO: Loading module hook 'hook-distutils.util.py' from '/Users/jazzwang/Library/Python/3.9/lib/python/site-packages/PyInstaller/hooks'...
49187 INFO: Loading module hook 'hook-packaging.py' from '/Users/jazzwang/Library/Python/3.9/lib/python/site-packages/PyInstaller/hooks'...
49438 WARNING: Hidden import "jinja2" not found!
49459 INFO: Loading module hook 'hook-lxml.objectify.py' from '/Users/jazzwang/Library/Python/3.9/lib/python/site-packages/_pyinstaller_hooks_contrib/hooks/stdhooks'...
49487 INFO: Performing binary vs. data reclassification (628 entries)
52541 INFO: Looking for ctypes DLLs
52554 WARNING: Library msvcrt required via ctypes not found
52557 WARNING: Library user32 required via ctypes not found
52568 INFO: Analyzing run-time hooks ...
52576 INFO: Including run-time hook '/Users/jazzwang/Library/Python/3.9/lib/python/site-packages/PyInstaller/hooks/rthooks/pyi_rth_inspect.py'
52586 INFO: Including run-time hook '/Users/jazzwang/Library/Python/3.9/lib/python/site-packages/PyInstaller/hooks/rthooks/pyi_rth_pkgutil.py'
52601 INFO: Processing pre-find module path hook _pyi_rth_utils from '/Users/jazzwang/Library/Python/3.9/lib/python/site-packages/PyInstaller/hooks/pre_find_module_path/hook-_pyi_rth_utils.py'.
52615 INFO: Loading module hook 'hook-_pyi_rth_utils.py' from '/Users/jazzwang/Library/Python/3.9/lib/python/site-packages/PyInstaller/hooks'...
52621 INFO: Including run-time hook '/Users/jazzwang/Library/Python/3.9/lib/python/site-packages/PyInstaller/hooks/rthooks/pyi_rth_multiprocessing.py'
52632 INFO: Including run-time hook '/Users/jazzwang/Library/Python/3.9/lib/python/site-packages/PyInstaller/hooks/rthooks/pyi_rth_pkgres.py'
52701 INFO: Looking for dynamic libraries
54442 INFO: Warnings written to /Users/jazzwang/git/snippet/python/requests/hcml/build/check-books/warn-check-books.txt
54557 INFO: Graph cross-reference written to /Users/jazzwang/git/snippet/python/requests/hcml/build/check-books/xref-check-books.html
55143 INFO: checking PYZ
55143 INFO: Building PYZ because PYZ-00.toc is non existent
55143 INFO: Building PYZ (ZlibArchive) /Users/jazzwang/git/snippet/python/requests/hcml/build/check-books/PYZ-00.pyz
56487 INFO: Building PYZ (ZlibArchive) /Users/jazzwang/git/snippet/python/requests/hcml/build/check-books/PYZ-00.pyz completed successfully.
56514 INFO: EXE target arch: x86_64
56514 INFO: Code signing identity: None
56518 INFO: checking PKG
56519 INFO: Building PKG because PKG-00.toc is non existent
56519 INFO: Building PKG (CArchive) check-books.pkg
56558 INFO: Building PKG (CArchive) check-books.pkg completed successfully.
56559 INFO: Bootloader /Users/jazzwang/Library/Python/3.9/lib/python/site-packages/PyInstaller/bootloader/Darwin-64bit/run
56559 INFO: checking EXE
56560 INFO: Building EXE because EXE-00.toc is non existent
56560 INFO: Building EXE from EXE-00.toc
56560 INFO: Copying bootloader EXE to /Users/jazzwang/git/snippet/python/requests/hcml/build/check-books/check-books
56635 INFO: Converting EXE to target arch (x86_64)
56746 INFO: Removing signature(s) from EXE
56848 INFO: Appending PKG archive to EXE
56860 INFO: Fixing EXE headers for code signing
56879 INFO: Re-signing the EXE
56958 INFO: Building EXE from EXE-00.toc completed successfully.
56977 INFO: checking COLLECT
56977 INFO: Building COLLECT because COLLECT-00.toc is non existent
56978 INFO: Building COLLECT COLLECT-00.toc
66987 INFO: Building COLLECT COLLECT-00.toc completed successfully.
```
* 產生的執行檔會在 `dist` 目錄底下
```
jazzwang:~/git/snippet/python/requests/hcml$ ls dist/check-books/
_internal	check-books
jazzwang:~/git/snippet/python/requests/hcml$ file dist/check-books/check-books 
dist/check-books/check-books: Mach-O 64-bit executable x86_64
```